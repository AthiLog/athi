<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <link
      rel="shortcut icon"
      href="/athi/img/authors/favicon.ico"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/athi/css/normalize.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/athi/fonts/font-awesome/css/font-awesome.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/athi/css/modern-blog.css"
    />
    <!--[if IE]>
      <script type="text/javascript" src="js/vendors/html5.min.js"></script>
    <![endif]-->
    <script>
      if (navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
        var root = document.getElementsByTagName("html")[0];
        root.setAttribute("class", "ff");
      }
    </script>
  </head>
  <body class="body">
    <div class="container">
  <header class="header">
    <a href="/athi/" class="athi"
      ><h1>아띠<span>A Clean, Fresh Minimal Look.</span></h1></a
    >
    <nav class="links">
      <a href="#"><i class="fa fa-twitter-square fa-3x"></i></a>
      <a href="#"><i class="fa fa-instagram fa-3x"></i></a>
      <a href="#"><i class="fa fa-facebook-square fa-3x"></i></a>
      <a href="#"><i class="fa fa-tumblr-square fa-3x"></i></a>
    </nav>
    <!-- 
  
  
  
<br />

<span>test5|test6|test7|test8|test9|test10|test11|test12|test13|test14|test15|</span><br />
<span>VScodeVScodebooksgithubgoodwriting-seriesgoodwriting-seriesgoodwriting-seriesgoodwriting-seriesgoodwriting-seriesjekylljekylljekylljekylljekylljekyllreact-nativereact-nativereact-nativereact-nativereact-nativereact-nativereact-nativetest10test11test12test13test14test15test5test6test7test8test9</span>

<br />

<span>VScodebooksgithubgoodwriting-seriesjekyllreact-nativetest10test11test12test13test14test15test5test6test7test8test9</span>

<br />
<span>
  [ 
   
  
   
  
  <a href="/tag/VScode"
    ><code class="highligher-rouge"
      ><nobr>VScode</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/books"
    ><code class="highligher-rouge"
      ><nobr>books</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/github"
    ><code class="highligher-rouge"
      ><nobr>github</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/goodwriting-series"
    ><code class="highligher-rouge"
      ><nobr>goodwriting-series</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/jekyll"
    ><code class="highligher-rouge"
      ><nobr>jekyll</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/react-native"
    ><code class="highligher-rouge"
      ><nobr>react-native</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test10"
    ><code class="highligher-rouge"
      ><nobr>test10</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test11"
    ><code class="highligher-rouge"
      ><nobr>test11</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test12"
    ><code class="highligher-rouge"
      ><nobr>test12</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test13"
    ><code class="highligher-rouge"
      ><nobr>test13</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test14"
    ><code class="highligher-rouge"
      ><nobr>test14</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test15"
    ><code class="highligher-rouge"
      ><nobr>test15</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test5"
    ><code class="highligher-rouge"
      ><nobr>test5</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test6"
    ><code class="highligher-rouge"
      ><nobr>test6</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test7"
    ><code class="highligher-rouge"
      ><nobr>test7</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test8"
    ><code class="highligher-rouge"
      ><nobr>test8</nobr></code
    >&nbsp;</a
  >
  
   
  
  <a href="/tag/test9"
    ><code class="highligher-rouge"
      ><nobr>test9</nobr></code
    >&nbsp;</a
  >
  
   
  ]
</span>
<br /> -->





  


  

<div style="display: block; margin-left: auto; margin-right: auto; margin-top:30px; max-width: 500px; text-align: center;" class="tags">
<span >
   
  
   
  
  <a href="/athi/tag/VScode" class="VScodeTagLink"><code><nobr>VScode</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/books" class="booksTagLink"><code><nobr>books</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/github" class="githubTagLink"><code><nobr>github</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/goodwriting-series" class="goodwriting-seriesTagLink"><code><nobr>goodwriting-series</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/jekyll" class="jekyllTagLink"><code><nobr>jekyll</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/react-native" class="react-nativeTagLink"><code><nobr>react-native</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/test10" class="test10TagLink"><code><nobr>test10</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/test11" class="test11TagLink"><code><nobr>test11</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/test12" class="test12TagLink"><code><nobr>test12</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/test13" class="test13TagLink"><code><nobr>test13</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/test14" class="test14TagLink"><code><nobr>test14</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/test15" class="test15TagLink"><code><nobr>test15</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/test5" class="test5TagLink"><code><nobr>test5</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/test6" class="test6TagLink"><code><nobr>test6</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/test7" class="test7TagLink"><code><nobr>test7</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/test8" class="test8TagLink"><code><nobr>test8</nobr></code>&nbsp;</a>
  
   
  
  <a href="/athi/tag/test9" class="test9TagLink"><code><nobr>test9</nobr></code>&nbsp;</a>
  
  
</span>
</div>
  </header>
  <div class="content">
    <!-- trianglify pattern container -->
    <div class="pattern pattern--hidden"></div>
    <!-- cards -->

    <div class="wrapper">
      
      <div class="card" data-id="/2019/06/04/auth-server">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/06/04/auth-server-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/06/04/auth-server-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/athi/img/c.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">서버 인증</span>
              <p class="card__subtitle">Auth Server</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/athi/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-06-04</span>
              </div>
              <p><a href="https://medium.com/handlebar-labs/graphql-authentication-with-react-native-apollo-part-2-2-13ac8c362113">참고자료</a></p>

<h2 id="전체코드">전체코드</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">makeExecutableSchema</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">graphql-tools</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MongoClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">mongodb</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">TEMP_USER</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">_id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">email</span><span class="p">:</span> <span class="dl">"</span><span class="s2">spencer@handlebarlabs.com</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">typeDefs</span> <span class="o">=</span> <span class="s2">`
  type User {
    _id: String
    email: String
  }
  type Query {
    currentUser: User
  }
  type Mutation {
    login(email: String!, password: String!): User
    signUp(email: String!, password: String!): User
  }
`</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">Query</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">currentUser</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">TEMP_USER</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">passwrod</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">TEMP_USER</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="na">signup</span><span class="p">:</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">TEMP_USER</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Required: Export the GraphQL.js schema object as "schema"</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">schema</span> <span class="o">=</span> <span class="nx">makeExecutableSchema</span><span class="p">({</span>
  <span class="nx">typeDefs</span><span class="p">,</span>
  <span class="nx">resolvers</span>
<span class="p">});</span>

<span class="c1">// Optional: Export a function to get context from the request.</span>

<span class="kd">let</span> <span class="nx">mongo</span><span class="p">;</span>

<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">context</span><span class="p">(</span><span class="nx">headers</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">mongo</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">mongo</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">MongoClient</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">secrets</span><span class="p">.</span><span class="nx">MONGO_URL</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">headers</span><span class="p">,</span>
    <span class="nx">secrets</span><span class="p">,</span>
    <span class="nx">mongo</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="connecting-to-thedatabase">Connecting to the Database</h2>

<p>Once you’ve set up your account with <a href="https://mlab.com">mLab</a> and created a new mongo db instance you should see a url along the lines of</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mongodb://&lt;dbuser&gt;:&lt;dbpassword&gt;@ds121665.mlab.com:21665/graphql-auth-demo-1
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 나의경우
mongodb://shiftcard:1234@ds121665.mlab.com:21665/graphql-auth-demo-1
</code></pre></div></div>

<p><code class="highlighter-rouge">launchpad apollo의 key에 MONGO_URL, value값에 위의 값 추가함</code></p>

<p>you’ll also need to create a user for that database (with write permissions). Take that url and add it to our “secrets” as <code class="highlighter-rouge">MONGO_URL</code> in Launchpad. Make sure to swap out <code class="highlighter-rouge">&lt;dbuser&gt;</code> and <code class="highlighter-rouge">&lt;dbpassword&gt;</code> with the values of the user you created.</p>

<p>By adding the secret values here we can access them from our context function, which is where we’ll be establishing our mongo connection. This context function will be called each time a request is made to a GraphQL endpoint so we want to store a reference to our connection outside of the function (allowing us to only make the db connection request once). We’ll then return the mongo variable in context so that we access it in our resolver functions.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">mongo</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">client</span><span class="p">;</span>
<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">context</span><span class="p">(</span><span class="nx">headers</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">mongo</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">client</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">MongoClient</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">secrets</span><span class="p">.</span><span class="nx">MONGO_URL</span><span class="p">);</span>
    <span class="nx">mongo</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">(</span><span class="dl">"</span><span class="s2">graphql-auth-demo-1</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">headers</span><span class="p">,</span>
    <span class="nx">secrets</span><span class="p">,</span>
    <span class="nx">mongo</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Make sure you <code class="highlighter-rouge">import { MongoClient } from 'mongodb';</code> at the top of your file! Launchpad will automatically install it.</p>

<h2 id="sign-up">Sign Up</h2>

<p>Now let’s access the database from the resolver functions… first signup. We’ll get a reference to a <code class="highlighter-rouge">users</code> collection and then check if a user with the given email address already exists.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="na">signup</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">existingUser</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">existingUser</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email already used</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// TODO: Make this real</span>
      <span class="k">return</span> <span class="nx">TEMP_USER</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>We can then insert the user document into the collection. I’ll be using <code class="highlighter-rouge">bcrypt</code> to hash the user’s password, because you should never store a plain text password in your database! Make sure you import the lib:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">bcrypt</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">bcrypt</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p>I’m going to be using async/await because it makes for easy to follow code.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="na">signup</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">existingUser</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">existingUser</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email already used</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">hash</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
      <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span>
        <span class="nx">email</span><span class="p">,</span>
        <span class="na">password</span><span class="p">:</span> <span class="nx">hash</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>

      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Go ahead and give it a shot in Launchpad</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">mutation</span> <span class="p">{</span>
  <span class="nx">signup</span><span class="p">(</span><span class="nx">email</span><span class="p">:</span><span class="dl">"</span><span class="s2">c@test.com</span><span class="dl">"</span><span class="p">,</span> <span class="nx">password</span><span class="p">:</span><span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">_id</span>
    <span class="nx">email</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="login">Login</h2>

<p>The login mutation is very similar to the one we just put together.</p>

<p>First we’ll check if a user with that email address exists.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email not found</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Then we’ll compare the password supplied and the password we have stored. If they match then return the user!</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email not found</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">validPassword</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">validPassword</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Password is incorrect</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>So now we’ve got our sign in &amp; sign up mutations working, but that isn’t all! We don’t want to force the user to have to login with every request. Enter…</p>

<h2 id="json-webtokens">JSON Web Tokens</h2>

<blockquote>
  <p>JSON Web Token (JWT) is an open standard (<a href="https://tools.ietf.org/html/rfc7519">RFC 7519</a>) that defines a compact and self-contained way for securely transmitting information between parties as a JSON object. This information can be verified and trusted because it is digitally signed. JWTs can be signed using a secret (with the <strong>HMAC</strong> algorithm) or a public/private key pair using <strong>RSA</strong>.</p>
</blockquote>

<p>For us this means that we can generate a JWT and use that as a means of confidently identifying a user. The flow will work like this</p>

<ol>
  <li>User logs in or signs up</li>
  <li>The server returns a JWT</li>
  <li>The client saves the JWT to their local storage (covered in part 2)</li>
  <li>The JWT is passed with each request from client to server (on the <code class="highlighter-rouge">Authorization</code> header — covered in part 2)</li>
  <li>The server uses the JWT to grab the user’s information and add it to <code class="highlighter-rouge">context</code></li>
</ol>

<blockquote>
  <p>A note on step 5: Since I wanted to keep this all browser based we need to do this manually. If you’ve got total control over the server though you can use <code class="highlighter-rouge">[express-jwt](https://www.npmjs.com/package/express-jwt)</code> to do this automatically. This is a good way to learn what that module is doing though!</p>
</blockquote>

<h3 id="the-secret">The Secret</h3>

<p>A JWT is signed with a secret value. We’ll want to come up with one and add that to the “Secrets” in Launchpad, like we did <code class="highlighter-rouge">MONGO_URL</code>. I’m storing it as <code class="highlighter-rouge">JWT_SECRET</code> with a value of <code class="highlighter-rouge">super-secret</code>.</p>

<p><code class="highlighter-rouge">launchpad apollo의 key값에 JWT_SCRET과 value값에 super-secret 추가함</code></p>

<p>Now, using that secret we’ll want to generate a new JWT and return it on the user object when they successfully login or sign up. First I’ll add <code class="highlighter-rouge">jwt</code> to the <code class="highlighter-rouge">User</code>type in our type definitions.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="p">...</span>

<span class="kd">const</span> <span class="nx">typeDefs</span> <span class="o">=</span> <span class="s2">`
  type User {
    _id: String
    email: String
    jwt: String
  }
  type Query {
    currentUser: User
  }
  type Mutation {
    login(email: String!, password: String!): User
    signup(email: String!, password: String!): User
  }
`</span><span class="p">;</span>

<span class="p">...</span>
</code></pre></div></div>

<p>Make sure you add import jwt from ‘jsonwebtoken’; to the top of your file.</p>

<h2 id="generating-the-token">Generating the Token</h2>

<p>Then, upon successful login, I’ll create a JWT. We’re passing the user’s id as part of the payload and secrets is coming from context.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span><span class="p">,</span> <span class="nx">secrets</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email not found</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">validPassword</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">compare</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">validPassword</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Password is incorrect</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// Generate the jwt and add it to the user document being returned.</span>
      <span class="nx">user</span><span class="p">.</span><span class="nx">jwt</span> <span class="o">=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">({</span> <span class="na">_id</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">_id</span> <span class="p">},</span> <span class="nx">secrets</span><span class="p">.</span><span class="nx">JWT_SECRET</span><span class="p">);</span>

      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>We’ll do the same for sign up.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="na">Mutation</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="na">signup</span><span class="p">:</span> <span class="k">async</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">mongo</span><span class="p">,</span> <span class="nx">secrets</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">Users</span> <span class="o">=</span> <span class="nx">mongo</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">existingUser</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">existingUser</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Email already used</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">hash</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">bcrypt</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
      <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span>
        <span class="nx">email</span><span class="p">,</span>
        <span class="na">password</span><span class="p">:</span> <span class="nx">hash</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="nx">email</span> <span class="p">});</span>

      <span class="nx">user</span><span class="p">.</span><span class="nx">jwt</span> <span class="o">=</span> <span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">({</span> <span class="na">_id</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">_id</span> <span class="p">},</span> <span class="nx">secrets</span><span class="p">.</span><span class="nx">JWT_SECRET</span><span class="p">);</span>

      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="adding-the-current-user-to-context">Adding the Current User to Context</h2>

<p>Finally (for this part at least) we need to add the current user to context.</p>

<p>Remember, if you’re not using Launchpad you can use express-jwt to do this automatically. I also need to note that I’m basing this function a bit off of this launchpad which does the same thing but for the Auth0 service.</p>

<p>First, create a new function called getUser and check if we’ve got a potentially valid authorization token in the header.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getUser</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">authorization</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">,</span> <span class="nx">mongo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">bearerLength</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Bearer </span><span class="dl">"</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">authorization</span> <span class="o">&amp;&amp;</span> <span class="nx">authorization</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">bearerLength</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Then we’ll try to verify the token that was passed.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getUser</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">authorization</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">,</span> <span class="nx">mongo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">bearerLength</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Bearer </span><span class="dl">"</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">authorization</span> <span class="o">&amp;&amp;</span> <span class="nx">authorization</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">bearerLength</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">authorization</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">bearerLength</span><span class="p">);</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">ok</span><span class="p">,</span> <span class="nx">result</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span>
      <span class="nx">jwt</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="nx">token</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">.</span><span class="nx">JWT_SECRET</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">resolve</span><span class="p">({</span>
            <span class="na">ok</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="na">result</span><span class="p">:</span> <span class="nx">err</span>
          <span class="p">});</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">resolve</span><span class="p">({</span>
            <span class="na">ok</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">result</span>
          <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">})</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">mongo</span>
        <span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">users</span><span class="dl">"</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">_id</span><span class="p">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">_id</span><span class="p">)</span> <span class="p">});</span>
      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Then we’ll attempt to fetch the user from our database using the _id that we put into the jwt payload initially. ObjectId is coming from the mongdb module.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">getUser</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">authorization</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">,</span> <span class="nx">mongo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">bearerLength</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Bearer </span><span class="dl">"</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">authorization</span> <span class="o">&amp;&amp;</span> <span class="nx">authorization</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">bearerLength</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">authorization</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">bearerLength</span><span class="p">);</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">ok</span><span class="p">,</span> <span class="nx">result</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span>
      <span class="nx">jwt</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="nx">token</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">.</span><span class="nx">JWT_SECRET</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">resolve</span><span class="p">({</span>
            <span class="na">ok</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="na">result</span><span class="p">:</span> <span class="nx">err</span>
          <span class="p">});</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">resolve</span><span class="p">({</span>
            <span class="na">ok</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">result</span>
          <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">})</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">mongo</span>
        <span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">"</span><span class="s2">users</span><span class="dl">"</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="na">_id</span><span class="p">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">_id</span><span class="p">)</span> <span class="p">});</span>
      <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Finally, let’s go ahead and call this getUser function from the context function.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nx">context</span><span class="p">(</span><span class="nx">headers</span><span class="p">,</span> <span class="nx">secrets</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">mongo</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">client</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">MongoClient</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">secrets</span><span class="p">.</span><span class="nx">MONGO_URL</span><span class="p">);</span>
    <span class="nx">mongo</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">(</span><span class="dl">"</span><span class="s2">graphql-auth-demo-1</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getUser</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">],</span> <span class="nx">secrets</span><span class="p">,</span> <span class="nx">mongo</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">headers</span><span class="p">,</span>
    <span class="nx">secrets</span><span class="p">,</span>
    <span class="nx">mongo</span><span class="p">,</span>
    <span class="nx">user</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We can also update the <code class="highlighter-rouge">currentUser</code> query to return the user from context.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">resolvers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">Query</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">currentUser</span><span class="p">:</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="p">...</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Let’s go ahead and check this out…</p>

<p>And there you have it! Runnable source code is available below</p>

            </div>
          </div>
        </div>
      </div>
      
      <div class="card" data-id="/2019/06/04/auth-client">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/06/04/auth-client-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/06/04/auth-client-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/athi/img/d.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">클라이언트 인증</span>
              <p class="card__subtitle">Client Auth</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/athi/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-06-04</span>
              </div>
              <p><a href="https://medium.com/handlebar-labs/graphql-authentication-with-react-native-apollo-part-1-2-9613aacd80b3">참고자료</a></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// app.js</span>
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">StackNavigator</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-navigation</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// 1.0.0-beta.19</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApolloClient</span><span class="p">,</span> <span class="nx">HttpLink</span><span class="p">,</span> <span class="nx">InMemoryCache</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">apollo-client-preset</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ApolloProvider</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-apollo</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">setContext</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">apollo-link-context</span><span class="dl">"</span><span class="p">;</span>

<span class="k">import</span> <span class="nx">Register</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Register</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Login</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Login</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Profile</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Profile</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">signIn</span><span class="p">,</span> <span class="nx">signOut</span><span class="p">,</span> <span class="nx">getToken</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./util</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">AuthStack</span> <span class="o">=</span> <span class="nx">StackNavigator</span><span class="p">({</span>
  <span class="na">Register</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">screen</span><span class="p">:</span> <span class="nx">Register</span><span class="p">,</span>
    <span class="na">navigationOptions</span><span class="p">:</span> <span class="p">{</span> <span class="na">headerTitle</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Register</span><span class="dl">"</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">Login</span><span class="p">:</span> <span class="p">{</span> <span class="na">screen</span><span class="p">:</span> <span class="nx">Login</span><span class="p">,</span> <span class="na">navigationOptions</span><span class="p">:</span> <span class="p">{</span> <span class="na">headerTitle</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Login</span><span class="dl">"</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">LoggedInStack</span> <span class="o">=</span> <span class="nx">StackNavigator</span><span class="p">({</span>
  <span class="na">Profile</span><span class="p">:</span> <span class="p">{</span> <span class="na">screen</span><span class="p">:</span> <span class="nx">Profile</span><span class="p">,</span> <span class="na">navigationOptions</span><span class="p">:</span> <span class="p">{</span> <span class="na">headerTitle</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Profile</span><span class="dl">"</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">httpLink</span> <span class="o">=</span> <span class="nx">newHttpLink</span><span class="p">({</span> <span class="na">uri</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://graphql서버주소</span><span class="dl">'</span><span class="p">});</span>
<span class="kd">const</span> <span class="nx">authLink</span> <span class="o">=</span> <span class="nx">setContext</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="p">{</span><span class="nx">headers</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getToken</span><span class="p">();</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="p">...</span><span class="nx">headers</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">authorization</span><span class="p">:</span> <span class="nx">token</span> <span class="p">?</span><span class="s2">`Bearer $(token)`</span> <span class="p">:</span><span class="kc">null</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">authLink</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">httpLInk</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ApolloClient</span><span class="p">({</span>
    <span class="nx">link</span><span class="p">,</span>
    <span class="na">cache</span><span class="p">:</span> <span class="k">new</span> <span class="nx">InMemoryCache</span><span class="p">(),</span>

<span class="p">})</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">loggedIn</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">componentWillMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getToken</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">token</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">loggedIn</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">handleChangeLoginState</span> <span class="o">=</span> <span class="p">(</span><span class="nx">loggedIn</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">jwt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">loggedIn</span> <span class="p">});</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">loggedIn</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">signIn</span><span class="p">(</span><span class="nx">jwt</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">signOut</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">ApolloClient</span> <span class="nx">client</span><span class="o">=</span><span class="p">{</span><span class="nx">client</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">loggedIn</span> <span class="p">?</span>
            <span class="o">&lt;</span><span class="nx">LoggedInStack</span>
                <span class="nx">screenProps</span><span class="o">=</span><span class="p">{</span> <span class="na">changeLoginState</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChangeLoginState</span> <span class="p">}</span>
            <span class="sr">/</span><span class="err">&gt;
</span>             <span class="p">:</span>
            <span class="o">&lt;</span><span class="nx">AuthStack</span>
                <span class="nx">screenProps</span><span class="o">=</span><span class="p">{</span> <span class="na">changeLoginState</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChangeLoginState</span> <span class="p">}</span>
            <span class="sr">/</span><span class="err">&gt;
</span>        <span class="p">}</span>
        <span class="o">&lt;</span><span class="sr">/AolloClient</span><span class="err">&gt;
</span>      <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>bla</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// util.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AsyncStorage</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-native</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">AUTH_TOKEN</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">AUTH_TOKEN</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">token</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">getToken</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">token</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">token</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">token</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">AsyncStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">AUTH_TOKEN</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">token</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">signIn</span> <span class="o">=</span> <span class="nx">newToken</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">token</span> <span class="o">=</span> <span class="nx">newToken</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">AsyncStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">AUTH_TOKEN</span><span class="p">,</span> <span class="nx">newToken</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">signOut</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">token</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">AsyncStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="nx">AUTH_TOKEN</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>bla</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//login.js</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">Container</span><span class="p">,</span>
  <span class="nx">Button</span><span class="p">,</span>
  <span class="nx">Content</span><span class="p">,</span>
  <span class="nx">Form</span><span class="p">,</span>
  <span class="nx">Item</span><span class="p">,</span>
  <span class="nx">Input</span><span class="p">,</span>
  <span class="nx">Text</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">native-base</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">gql</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">graphql-tag</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">graphql</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-apollo</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Login</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">email</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="na">emailError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">password</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="na">passwordError</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="nx">handleInputChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">newState</span> <span class="o">=</span> <span class="p">{</span>
      <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">field</span><span class="p">]:</span> <span class="nx">value</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span><span class="nx">newState</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">handleSubmit</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">email</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">emailError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">emailError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">password</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="c1">// return this.props.screenProps.changeLoginState(true);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">props</span>
      <span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">data</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">screenProps</span><span class="p">.</span><span class="nx">changeLoginState</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">login</span><span class="p">.</span><span class="nx">jwt</span><span class="p">);</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="sr">/email/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">emailError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="sr">/password/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">});</span>
  <span class="p">};</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">emailError</span><span class="p">,</span> <span class="nx">passwordError</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">Container</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Content</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Form</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Item</span> <span class="nx">error</span><span class="o">=</span><span class="p">{</span><span class="nx">emailError</span><span class="p">}</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">Input</span>
                <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Email</span><span class="dl">"</span>
                <span class="nx">onChangeText</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleInputChange</span><span class="p">(</span><span class="dl">"</span><span class="s2">email</span><span class="dl">"</span><span class="p">,</span> <span class="nx">value</span><span class="p">)}</span>
                <span class="nx">keyboardType</span><span class="o">=</span><span class="dl">"</span><span class="s2">email-address</span><span class="dl">"</span>
                <span class="nx">autoCapitalize</span><span class="o">=</span><span class="dl">"</span><span class="s2">none</span><span class="dl">"</span>
                <span class="nx">autoCorrect</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span>
              <span class="sr">/</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/Item</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">Item</span> <span class="nx">error</span><span class="o">=</span><span class="p">{</span><span class="nx">passwordError</span><span class="p">}</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">Input</span>
                <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Password</span><span class="dl">"</span>
                <span class="nx">onChangeText</span><span class="o">=</span><span class="p">{</span><span class="nx">value</span> <span class="o">=&gt;</span>
                  <span class="k">this</span><span class="p">.</span><span class="nx">handleInputChange</span><span class="p">(</span><span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="nx">autoCapitalize</span><span class="o">=</span><span class="dl">"</span><span class="s2">none</span><span class="dl">"</span>
                <span class="nx">autoCorrect</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span>
                <span class="nx">secureTextEntry</span>
              <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="sr">/Item</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/Form</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">full</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Sign</span> <span class="nx">In</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/Content</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/Container</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">graphql</span><span class="p">(</span>
  <span class="nx">gql</span><span class="s2">`
    mutation LogIn($email: String!, $password: String!) {
      login(email: $email, password: $password) {
        _id
        email
        jwt
      }
    }
  `</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">props</span><span class="p">:</span> <span class="p">({</span> <span class="nx">mutate</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span>
      <span class="na">login</span><span class="p">:</span> <span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">mutate</span><span class="p">({</span> <span class="na">variables</span><span class="p">:</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span> <span class="p">}</span> <span class="p">})</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">)(</span><span class="nx">Login</span><span class="p">);</span>
</code></pre></div></div>

<p>bla</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// register.js</span>
<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">Container</span><span class="p">,</span>
  <span class="nx">Button</span><span class="p">,</span>
  <span class="nx">Content</span><span class="p">,</span>
  <span class="nx">Form</span><span class="p">,</span>
  <span class="nx">Item</span><span class="p">,</span>
  <span class="nx">Input</span><span class="p">,</span>
  <span class="nx">Text</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">native-base</span><span class="dl">"</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span><span class="nx">graphql</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-apollo</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">gql</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">graph-tag</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Register</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">email</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="na">emailError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">password</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="na">passwordError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">confirmPassword</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="na">confirmPasswordError</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="nx">handleInputChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">newState</span> <span class="o">=</span> <span class="p">{</span>
      <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">field</span><span class="p">]:</span> <span class="nx">value</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span><span class="nx">newState</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">handleSubmit</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">confirmPassword</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">email</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">emailError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">emailError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">password</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">confirmPassword</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">confirmPasswordError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">confirmPasswordError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">password</span> <span class="o">!==</span> <span class="nx">confirmPassword</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">confirmPasswordError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">passwordError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="na">confirmPasswordError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

    <span class="c1">// return this.props.screenProps.changeLoginState(true);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">props</span>
      <span class="p">.</span><span class="nx">signup</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">passowrd</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">data</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">screenProps</span><span class="p">.</span><span class="nx">changeLoginState</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">signup</span><span class="p">.</span><span class="nx">jwt</span><span class="p">)</span><span class="dl">'</span><span class="s1">
      })
      .catch(e =&gt; {
        if (/email/i.test(e.message)) {
          this.setState({ emailError: true});
        }
        if (/password/i.test(e.message)) {
          this.setState({ passwordError: true});
        }
      })

  };

  render() {
    const { navigation } = this.props;
    const { emailError, passwordError, confirmPasswordError } = this.state;

    return (
      &lt;Container&gt;
        &lt;Content&gt;
          &lt;Form&gt;
            &lt;Item error={emailError}&gt;
              &lt;Input
                placeholder="Email"
                onChangeText={value =&gt; this.handleInputChange("email", value)}
                keyboardType="email-address"
                autoCapitalize="none"
                autoCorrect={false}
              /&gt;
            &lt;/Item&gt;
            &lt;Item error={passwordError}&gt;
              &lt;Input
                placeholder="Password"
                onChangeText={value =&gt;
                  this.handleInputChange("password", value)
                }
                autoCapitalize="none"
                autoCorrect={false}
                secureTextEntry
              /&gt;
            &lt;/Item&gt;
            &lt;Item last error={confirmPasswordError}&gt;
              &lt;Input
                placeholder="Confirm Password"
                onChangeText={value =&gt;
                  this.handleInputChange("confirmPassword", value)
                }
                autoCapitalize="none"
                autoCorrect={false}
                secureTextEntry
              /&gt;
            &lt;/Item&gt;
          &lt;/Form&gt;
          &lt;Button full onPress={this.handleSubmit}&gt;
            &lt;Text&gt;Sign Up&lt;/Text&gt;
          &lt;/Button&gt;
          &lt;Button full transparent onPress={() =&gt; navigation.navigate("Login")}&gt;
            &lt;Text&gt;Sign In&lt;/Text&gt;
          &lt;/Button&gt;
        &lt;/Content&gt;
      &lt;/Container&gt;
    );
  }
}

export default graphql(
  gql`
    mutation SignUp($email: String!, $password: String!) {
      signup(email: $email, password: $password) {
        _id
        email
        jwt
      }
    }
  `,
  {
    props: ({ mutate }) =&gt; {
      signup: (email, password) =&gt; mutate({ variables: { email, passwrod } });
    }
  }
)(Register);
</span></code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// profile.js</span>

<span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-native</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Container</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">Button</span><span class="p">,</span> <span class="nx">Content</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">native-base</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">graphql</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-apollo</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">gql</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">graphql-tag</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Logout</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">handleLogout</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">screenProps</span><span class="p">.</span><span class="nx">changeLoginState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">currentUser</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">Container</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Content</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">currentUser</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">_id</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>              <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">currentUser</span><span class="p">.</span><span class="nx">password</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>          <span class="p">)}</span>
          <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">full</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleLogout</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Log</span> <span class="nx">Out</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/Content</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/Container</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">graphql</span><span class="p">(</span>
  <span class="nx">gql</span><span class="s2">`
    query User {
      currentUser {
        _id
        email
      }
    }
  `</span>
<span class="p">)(</span><span class="nx">Logout</span><span class="p">);</span>
</code></pre></div></div>

            </div>
          </div>
        </div>
      </div>
      
      <div class="card" data-id="/2019/06/04/react-native-align-center">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/06/04/react-native-align-center-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/06/04/react-native-align-center-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/athi/img/f.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">리액트 네이티브 가운데정렬</span>
              <p class="card__subtitle">Jekyll folder's structure</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/athi/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-06-04</span>
              </div>
              <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">StyleSheet</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-native</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">styles</span> <span class="o">=</span> <span class="nx">StyleSheet</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">login</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">flex</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">justifyContent</span><span class="p">:</span> <span class="dl">"</span><span class="s2">center</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">alignItems</span><span class="p">:</span> <span class="dl">"</span><span class="s2">center</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">class</span> <span class="nx">Login</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">login</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span> <span class="nx">Login</span> <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Login</span><span class="p">;</span>
</code></pre></div></div>

<p>alignItems는 가로로 가운데 정렬
justifyContent는 세로로 가운데 정렬
<img src="https://i.imgur.com/n4DVf3q.png" alt="가운데 정렬" /></p>

            </div>
          </div>
        </div>
      </div>
      
      <div class="card" data-id="/2019/06/03/jekyll-structure">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/06/03/jekyll-structure-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/06/03/jekyll-structure-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/athi/img/c.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">#3 Jekyll폴더구조</span>
              <p class="card__subtitle">Jekyll folder's structure</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/athi/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-06-03</span>
              </div>
              <p>Jekyll의 디렉토리 구조에 대해 살펴보자. 개인적으로는 Jekyll의 디렉토리 구조만 대충 알아도 거의 50% 이상은 알게 된 셈이라고 생각할 정도로 Jekyll은 직관적이고 쉽다.
Jekyll 폴더를 생성하면 다음과 같은 파일이 생성된다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├── <span class="se">\_</span>config.yml
├── <span class="se">\_</span>data
| └── members.yml
├── <span class="se">\_</span>drafts
| ├── begin-with-the-crazy-ideas.md
| └── on-simplicity-in-technology.md
├── <span class="se">\_</span>includes
| ├── footer.html
| └── header.html
├── <span class="se">\_</span>layouts
| ├── default.html
| └── post.html
├── <span class="se">\_</span>posts
| ├── 2007-10-29-why-every-programmer-should-play-nethack.md
| └── 2009-04-26-barcamp-boston-4-roundup.md
├── <span class="se">\_</span>sass
| ├── <span class="se">\_</span>base.scss
| └── <span class="se">\_</span>layout.scss
├── <span class="se">\_</span>site
├── .jekyll-metadata
└── index.html <span class="c"># 'index.md' 이어도 되지만 올바른 YAML 머리말이 필요합니다</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>파일/디렉토리</th>
      <th>기능 &amp; 역할</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>_config.yml</td>
      <td><a href="https://jekyllrb-ko.github.io/docs/configuration/">환경설정</a> 정보를 보관한다. 명령어를 실행할 때 여러가지 옵션들을 추가할 수도 있지만, 그렇게 따로 외우는 것보다 이 파일에 정의해두는게 더 편리하다.</td>
    </tr>
    <tr>
      <td>_drafts</td>
      <td>초안이란 아직 게시하지 않은 포스트를 말한다. 파일명 형식에 날짜가 없다: <code class="highlighter-rouge">title.MARKUP</code>. 사용 방법은 <a href="https://jekyllrb-ko.github.io/docs/drafts/">초안 활용하기</a>를 참고하라.</td>
    </tr>
    <tr>
      <td>_includes</td>
      <td>재사용하기 위한 파일을 담는 디렉토리로서, 필요에 따라 포스트나 레이아웃에 쉽게 삽입할 수 있다. {% include file.ext %}  와 같이 Liquid 태그를 사용하면 <code class="highlighter-rouge">_includes/file.ext</code> 파일에 담긴 코드가 삽입된다.</td>
    </tr>
    <tr>
      <td>_layouts</td>
      <td>포스트를 포장할 때 사용하는 템플릿이다. 각 포스트 별로 레이아웃을 선택하는 기준은 <a href="https://jekyllrb-ko.github.io/docs/frontmatter/">YAML 머리말</a>이며, 자세한 내용은 다음 섹션에서 설명한다. <code class="highlighter-rouge">{{content}}</code>와 같이 Liquid 태그를 사용하면 페이지에 컨텐츠가 주입된다.</td>
    </tr>
    <tr>
      <td>_posts</td>
      <td>한마디로 말하면, 당신의 컨텐츠다. 중요한 것은 파일들의 명명규칙인데, 반드시 이 형식을 따라야 한다: <code class="highlighter-rouge">YEAR-MONTH-DAY-title.MARKUP</code>. <a href="https://jekyllrb-ko.github.io/docs/permalinks/">고유주소</a>는 포스트 별로 각각 정의할 수 있지만, 날짜와 마크업 언어 종류는 오로지 파일명에 의해 결정된다.</td>
    </tr>
    <tr>
      <td>_data</td>
      <td>사이트에 사용할 데이터를 적절한 포맷으로 정리하여 보관하는 디렉토리. Jekyll 엔진은 이 디렉토리에 있는 (확장자와 포맷이 <code class="highlighter-rouge">.yml</code> 또는 <code class="highlighter-rouge">.yaml</code>, <code class="highlighter-rouge">.json</code>, <code class="highlighter-rouge">.csv</code> 인) 모든 데이터 파일을 자동으로 읽어들여 `site.data` 로 사용할 수 있도록 만든다. 만약 이 디렉토리에 <code class="highlighter-rouge">members.yml</code> 라는 파일이 있다면, <code class="highlighter-rouge">site.data.members</code> 라고 입력하여 그 컨텐츠를 사용할 수 있다.</td>
    </tr>
    <tr>
      <td>_sass</td>
      <td>Sass 조각파일들로, 프로젝트의 <code class="highlighter-rouge">main.scss</code> 에 임포트할 수 있으며 임포트 후에는 다시 하나의 스타일시트(<code class="highlighter-rouge">main.scss</code>)로 가공되어 사이트에 사용되는 스타일들을 정의한다.</td>
    </tr>
    <tr>
      <td>_site</td>
      <td>Jekyll 이 변환 작업을 마친 뒤 생성된 사이트가 저장되는 (디폴트) 경로이다. 대부분의 경우, 이 경로를 <code class="highlighter-rouge">.gitignore</code> 에 추가하는 것은 괜찮은 생각이다.</td>
    </tr>
    <tr>
      <td>.jekyll-metadata</td>
      <td>Jekyll 은 이 파일을 참고하여, 마지막으로 빌드한 이후에 한번도 수정되지 않은 파일은 어떤 것인지, 다음 빌드 때 어떤 파일을 다시 생성해야 하는지 판단할 수 있다. 생성된 사이트에 이 파일이 복사되지는 않는다. 대부분의 경우, 이 파일을 <code class="highlighter-rouge">.gitignore</code> 에 추가하는 것은 괜찮은 생각이다.</td>
    </tr>
    <tr>
      <td>index.html 또는 index.md 및 다른 HTML, 마크다운, Textile 파일</td>
      <td>Jekyll 은 <a href="https://jekyllrb-ko.github.io/docs/frontmatter/">YAML 머리말</a> 섹션을 가진 모든 파일을 찾아 변환 작업을 수행한다. 위에서 언급하지 않은 다른 디렉토리나 사이트의 루트 디렉토리에 있는 모든 <code class="highlighter-rouge">.html</code>, <code class="highlighter-rouge">.markdown</code>, <code class="highlighter-rouge">.md</code>, <code class="highlighter-rouge">.textile</code> 이 여기에 해당한다.</td>
    </tr>
    <tr>
      <td>다른 파일/폴더</td>
      <td><code class="highlighter-rouge">css</code> 나 <code class="highlighter-rouge">images</code> 폴더, <code class="highlighter-rouge">favicon.ico</code> 파일같이 앞서 언급하지 않은 다른 모든 디렉토리와 파일들은 있는 그대로 생성된 사이트에 복사한다. 다른 사람들이 만든 사이트는 어떤식으로 생겼는지 궁금하다면, <a href="https://jekyllrb-ko.github.io/docs/sites/">Jekyll 을 사용하는 사이트들</a>이 이미 많이 있으니 살펴보도록 한다.</td>
    </tr>
  </tbody>
</table>

            </div>
          </div>
        </div>
      </div>
      
      <div class="card" data-id="/2019/06/02/use-jekyll">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/06/02/use-jekyll-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/06/02/use-jekyll-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/athi/img/b.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">#2 Jekyll사용하기</span>
              <p class="card__subtitle">How to use Jekyll</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/athi/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-06-02</span>
              </div>
              <h1 id="jekyll-app-설치">Jekyll app 설치</h1>

<p><code class="highlighter-rouge">jekyll new [폴더이름]</code></p>

<p><code class="highlighter-rouge">cd [폴더이름]</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># cmd창에서</span>
bundle <span class="nb">exec </span>jekyll serve
</code></pre></div></div>

<p><code class="highlighter-rouge">localhost:4000</code> 접속</p>

<p>이 창은 자기 컴퓨터를 기반으로 만든 로컬서버, 즉 자기만 쓸 수 있는 서버, 외부에서 접속할 수 없는 서버이다.</p>

<p>서버를 중지시키고 싶다면 cmd창에서 ctrl + c를 누르면 된다.</p>

            </div>
          </div>
        </div>
      </div>
      
      <div class="card" data-id="/2019/06/01/install-jekyll">
        <div class="card__container card__container--closed">
          <svg
            class="card__image"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 1920 1200"
            preserveAspectRatio="xMidYMid slice"
          >
            <defs>
              <clipPath id="/2019/06/01/install-jekyll-clip-path">
                <polygon
                  class="clip"
                  points="0,1200 0,0 1920,0 1920,1200"
                ></polygon>
              </clipPath>
            </defs>
            <image
              clip-path="url(#/2019/06/01/install-jekyll-clip-path)"
              width="1920"
              height="1200"
              xlink:href="/athi/img/a.jpg"
            ></image>
          </svg>
          <div class="card__content">
            <i class="card__btn-close fa fa-times"></i>
            <div class="card__caption">
              <span class="card__title">#1 Jekyll설치하기</span>
              <p class="card__subtitle">How to install</p>
            </div>
            <div class="card__copy">
              <div class="meta">
                <img
                  class="meta__avatar"
                  src="/athi/img/authors/athi.png"
                />
                <span class="meta__author">Athi</span>
                <span class="meta__date">2019-06-01</span>
              </div>
              <h1 id="루비ruby설치">루비(Ruby)설치</h1>

<p><a href="https://rubyinstaller.org/downloads/">루비다운로드 홈페이지</a></p>

<p><img src="https://i.imgur.com/0nzgffY.png" alt="check" /></p>

<p>다음과 같이 체크한 뒤 설치</p>

<p>cmd창 접속</p>

<p><code class="highlighter-rouge">ruby -v</code>
<code class="highlighter-rouge">gem -v</code>
위 명령어로 잘 설치되었는지 확인</p>

<h1 id="jekyll-설치">jekyll 설치</h1>

<p><code class="highlighter-rouge">gem install jekyll bundler</code></p>

<p><code class="highlighter-rouge">jekkyll -v</code> 이 명령어로 잘 설치되었는지 확인</p>

            </div>
          </div>
        </div>
      </div>
      
      <!-- /cards -->
    </div>
  </div>

  <div class="pagination">
  
  <a
    href="/athi/"
    class="previous"
    >Previous</a
  >
  
  <span class="page_number"
    >2 / 4</span
  >
  
  <a href="/athi/page/3/" class="next"
    >Next</a
  >
  
</div>


  <!-- /container -->
</div>

    <!-- JS -->
    <script src="/athi/js/vendors/trianglify.min.js"></script>
    <script src="/athi/js/modern-blog.js"></script>
    <script src="/athi/js/vendors/TweenMax.min.js"></script>
    <script src="/athi/js/vendors/ScrollToPlugin.min.js"></script>
    <script src="/athi/js/vendors/cash.min.js"></script>
    <script src="/athi/js/card-modern-blog.js"></script>
  </body>
</html>
